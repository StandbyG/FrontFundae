<div class="register-page">
  <div class="register-container">
    <!-- Lado izquierdo: Info y beneficios -->
    <div class="register-left">
      <div class="info-content">
        <!-- Logo y Brand -->
        <div class="brand-section">
          <div class="brand-icon">
            <i class="fa fa-universal-access"></i>
          </div>
          <h1 class="brand-name">Plataforma Inclusiva</h1>
        </div>

        <div class="hero-section">
          <h2 class="hero-title">Únete a la comunidad inclusiva</h2>
          <p class="hero-description">
            Crea tu cuenta y accede a herramientas diseñadas para promover la
            inclusión laboral
          </p>
        </div>

        <!-- Benefits List -->
        <div class="benefits-list">
          <div class="benefit-item">
            <div class="benefit-icon">
              <i class="fa fa-check-circle"></i>
            </div>
            <div class="benefit-content">
              <h4>Gestión simplificada</h4>
              <p>Administra ajustes razonables fácilmente</p>
            </div>
          </div>

          <div class="benefit-item">
            <div class="benefit-icon">
              <i class="fa fa-shield-alt"></i>
            </div>
            <div class="benefit-content">
              <h4>Seguridad garantizada</h4>
              <p>Tus datos están protegidos y encriptados</p>
            </div>
          </div>

          <div class="benefit-item">
            <div class="benefit-icon">
              <i class="fa fa-users"></i>
            </div>
            <div class="benefit-content">
              <h4>Soporte continuo</h4>
              <p>Acompañamiento en todo el proceso</p>
            </div>
          </div>

          <div class="benefit-item">
            <div class="benefit-icon">
              <i class="fa fa-chart-line"></i>
            </div>
            <div class="benefit-content">
              <h4>Reportes en tiempo real</h4>
              <p>Métricas y análisis de cumplimiento</p>
            </div>
          </div>
        </div>

        <!-- Link to Login -->
        <div class="login-link-section">
          <p>¿Ya tienes una cuenta?</p>
          <a [routerLink]="['/login']" class="btn-to-login">
            <i class="fa fa-sign-in"></i>
            Iniciar Sesión
          </a>
        </div>
      </div>
    </div>

    <!-- Lado derecho: Formulario -->
    <div class="register-right">
      <div class="form-wrapper">
        <!-- Header -->
        <div class="form-header">
          <h2 class="form-title">Crear Cuenta</h2>
          <p class="form-subtitle">Completa tus datos para comenzar</p>
        </div>

        <!-- Progress Indicator -->
        <div class="progress-steps" *ngIf="currentStep">
          <div
            class="step"
            [class.active]="currentStep >= 1"
            [class.completed]="currentStep > 1"
          >
            <div class="step-circle">1</div>
            <span class="step-label">Básicos</span>
          </div>
          <div class="step-line" [class.completed]="currentStep > 1"></div>
          <div
            class="step"
            [class.active]="currentStep >= 2"
            [class.completed]="currentStep > 2"
          >
            <div class="step-circle">2</div>
            <span class="step-label">Tipo</span>
          </div>
          <div class="step-line" [class.completed]="currentStep > 2"></div>
          <div class="step" [class.active]="currentStep >= 3">
            <div class="step-circle">3</div>
            <span class="step-label">Empresa</span>
          </div>
        </div>

        <form
          (ngSubmit)="registrar()"
          #registerForm="ngForm"
          class="register-form"
        >
          <!-- STEP 1: Datos Básicos -->
          <div class="form-section" *ngIf="!currentStep || currentStep === 1">
            <h3 class="section-title">
              <i class="fa fa-user"></i>
              Información Personal
            </h3>

            <div class="form-group">
              <label for="nombre" class="form-label">
                <i class="fa fa-id-card"></i>
                Nombre Completo <span class="required">*</span>
              </label>
              <div
                class="input-wrapper"
                [class.error]="nombreField.invalid && nombreField.touched"
              >
                <i class="input-icon fa fa-user"></i>
                <input
                  id="nombre"
                  type="text"
                  class="form-input"
                  [(ngModel)]="usuario.nombre"
                  name="nombre"
                  #nombreField="ngModel"
                  placeholder="Ej: Juan Pérez García"
                  required
                  minlength="3"
                  [class.invalid]="nombreField.invalid && nombreField.touched"
                />
              </div>
              <div
                class="error-message"
                *ngIf="nombreField.invalid && nombreField.touched"
              >
                <i class="fa fa-exclamation-circle"></i>
                <span *ngIf="nombreField.errors?.['required']"
                  >El nombre es obligatorio</span
                >
                <span *ngIf="nombreField.errors?.['minlength']"
                  >Mínimo 3 caracteres</span
                >
              </div>
            </div>

            <div class="form-group">
              <label for="correo" class="form-label">
                <i class="fa fa-envelope"></i>
                Correo Electrónico <span class="required">*</span>
              </label>
              <div
                class="input-wrapper"
                [class.error]="correoField.invalid && correoField.touched"
                [class.success]="correoField.valid && correoField.touched"
              >
                <i class="input-icon fa fa-envelope"></i>
                <input
                  id="correo"
                  type="email"
                  class="form-input"
                  [(ngModel)]="usuario.correo"
                  name="correo"
                  #correoField="ngModel"
                  placeholder="tu@empresa.com"
                  required
                  email
                  (blur)="verificarTipoUsuario()"
                  [class.invalid]="correoField.invalid && correoField.touched"
                />
                <i
                  class="validation-icon fa fa-check-circle"
                  *ngIf="correoField.valid && correoField.touched"
                ></i>
              </div>
              <div
                class="success-hint"
                *ngIf="esAdministrador && correoField.valid"
              >
                <i class="fa fa-crown"></i>
                Este correo será registrado como Administrador
              </div>
              <div
                class="error-message"
                *ngIf="correoField.invalid && correoField.touched"
              >
                <i class="fa fa-exclamation-circle"></i>
                <span *ngIf="correoField.errors?.['required']"
                  >El correo es obligatorio</span
                >
                <span *ngIf="correoField.errors?.['email']"
                  >Ingresa un correo válido</span
                >
              </div>
            </div>

            <div class="form-group">
              <label for="password" class="form-label">
                <i class="fa fa-lock"></i>
                Contraseña <span class="required">*</span>
              </label>
              <div
                class="input-wrapper"
                [class.error]="passwordField.invalid && passwordField.touched"
              >
                <i class="input-icon fa fa-lock"></i>
                <input
                  id="password"
                  [type]="showPassword ? 'text' : 'password'"
                  class="form-input"
                  [(ngModel)]="usuario.password"
                  name="password"
                  #passwordField="ngModel"
                  placeholder="••••••••"
                  required
                  minlength="6"
                  [class.invalid]="
                    passwordField.invalid && passwordField.touched
                  "
                />
                <button
                  type="button"
                  class="password-toggle"
                  (click)="togglePassword()"
                >
                  <i
                    [class]="showPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"
                  ></i>
                </button>
              </div>
              <div class="password-strength" *ngIf="usuario.password">
                <div class="strength-bar">
                  <div
                    class="strength-fill"
                    [class]="getPasswordStrength()"
                    [style.width.%]="getPasswordStrengthPercent()"
                  ></div>
                </div>
                <span class="strength-text">{{
                  getPasswordStrengthText()
                }}</span>
              </div>
              <div
                class="error-message"
                *ngIf="passwordField.invalid && passwordField.touched"
              >
                <i class="fa fa-exclamation-circle"></i>
                <span *ngIf="passwordField.errors?.['required']"
                  >La contraseña es obligatoria</span
                >
                <span *ngIf="passwordField.errors?.['minlength']"
                  >Mínimo 6 caracteres</span
                >
              </div>
            </div>
          </div>

          <!-- STEP 2: Tipo de Usuario (solo si no es admin automático) -->
          <div class="form-section" *ngIf="!esAdministrador">
            <h3 class="section-title">
              <i class="fa fa-briefcase"></i>
              Tipo de Cuenta
            </h3>

            <div class="user-type-cards">
              <label
                class="type-card"
                [class.selected]="usuario.tipoUsuario === 'empleador'"
              >
                <input
                  type="radio"
                  name="tipoUsuario"
                  value="empleador"
                  [(ngModel)]="usuario.tipoUsuario"
                  class="type-input"
                />
                <div class="type-card-content">
                  <div class="type-icon">
                    <i class="fa fa-building"></i>
                  </div>
                  <h4 class="type-title">Empleador</h4>
                  <p class="type-description">
                    Soy una empresa u organización que busca mejorar la
                    inclusión
                  </p>
                  <div class="type-check">
                    <i class="fa fa-check-circle"></i>
                  </div>
                </div>
              </label>
            </div>
          </div>

          <!-- STEP 3: Datos de Empresa (solo si es empleador) -->
          <div class="form-section" *ngIf="usuario.tipoUsuario === 'empleador'">
            <h3 class="section-title">
              <i class="fa fa-building"></i>
              Información de la Empresa
            </h3>

            <div class="form-row">
              <div class="form-group">
                <label for="nombreEmpresa" class="form-label">
                  <i class="fa fa-building"></i>
                  Nombre de la Empresa
                </label>
                <div class="input-wrapper">
                  <i class="input-icon fa fa-building"></i>
                  <input
                    id="nombreEmpresa"
                    type="text"
                    class="form-input"
                    [(ngModel)]="usuario.nombreEmpresa"
                    name="nombreEmpresa"
                    placeholder="Ej: Mi Empresa SAC"
                  />
                </div>
              </div>

              <div class="form-group">
                <label for="ruc" class="form-label">
                  <i class="fa fa-id-badge"></i>
                  RUC
                </label>
                <div class="input-wrapper">
                  <i class="input-icon fa fa-hashtag"></i>
                  <input
                    id="ruc"
                    type="text"
                    class="form-input"
                    [(ngModel)]="usuario.ruc"
                    name="ruc"
                    placeholder="20123456789"
                    maxlength="11"
                    pattern="[0-9]{11}"
                  />
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="sector" class="form-label">
                <i class="fa fa-industry"></i>
                Sector
              </label>
              <div class="input-wrapper">
                <i class="input-icon fa fa-industry"></i>
                <select
                  id="sector"
                  class="form-input"
                  [(ngModel)]="usuario.sector"
                  name="sector"
                >
                  <option value="">Selecciona un sector</option>
                  <option value="tecnologia">Tecnología</option>
                  <option value="salud">Salud</option>
                  <option value="educacion">Educación</option>
                  <option value="comercio">Comercio</option>
                  <option value="manufactura">Manufactura</option>
                  <option value="servicios">Servicios</option>
                  <option value="construccion">Construcción</option>
                  <option value="otro">Otro</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="direccion" class="form-label">
                <i class="fa fa-map-marker-alt"></i>
                Dirección
              </label>
              <div class="input-wrapper">
                <i class="input-icon fa fa-map-marker-alt"></i>
                <input
                  id="direccion"
                  type="text"
                  class="form-input"
                  [(ngModel)]="usuario.direccion"
                  name="direccion"
                  placeholder="Av. Principal 123, Lima"
                />
              </div>
            </div>
          </div>

          <!-- Terms and Conditions -->
          <div class="terms-section">
            <label class="checkbox-container">
              <input
                type="checkbox"
                [(ngModel)]="acceptTerms"
                name="acceptTerms"
                class="checkbox-input"
              />
              <span class="checkbox-custom">
                <i class="fa fa-check"></i>
              </span>
              <span class="checkbox-label">
                Acepto los
                <a href="#" class="terms-link">términos y condiciones</a> y la
                <a href="#" class="terms-link">política de privacidad</a>
              </span>
            </label>
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            class="btn-submit"
            [disabled]="registerForm.invalid || !acceptTerms || isLoading"
            [class.loading]="isLoading"
          >
            <span *ngIf="!isLoading" class="btn-content">
              <i class="fa fa-user-plus"></i>
              <span>Crear Cuenta</span>
            </span>
            <span *ngIf="isLoading" class="btn-loading">
              <span class="spinner"></span>
              <span>Creando cuenta...</span>
            </span>
          </button>

          <!-- Link to Login -->
          <div class="form-footer">
            <p>
              ¿Ya tienes una cuenta?
              <a [routerLink]="['/login']" class="login-link">Iniciar sesión</a>
            </p>
          </div>

          <!-- Error Alert -->
          <div *ngIf="error" class="alert alert-error" [@slideIn]>
            <div class="alert-icon">
              <i class="fa fa-exclamation-triangle"></i>
            </div>
            <div class="alert-content">
              <div class="alert-title">Error al registrar</div>
              <div class="alert-message">{{ error }}</div>
            </div>
            <button type="button" class="alert-close" (click)="error = ''">
              <i class="fa fa-times"></i>
            </button>
          </div>

          <!-- Success Alert -->
          <div *ngIf="exito" class="alert alert-success" [@slideIn]>
            <div class="alert-icon">
              <i class="fa fa-check-circle"></i>
            </div>
            <div class="alert-content">
              <div class="alert-title">¡Registro exitoso!</div>
              <div class="alert-message">
                Tu cuenta ha sido creada. Redirigiendo al login...
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Decorative elements -->
  <div class="decoration decoration-1"></div>
  <div class="decoration decoration-2"></div>
</div>
